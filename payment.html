<!DOCTYPE html>
<html lang="en">
<head>
    <!-- jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script>
    <!-- iamport.payment.js -->
    <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
    <script>
        //var IMP = window.IMP; 
        IMP.init("imp76331172"); 

        const urlParams = new URL(location.href).searchParams;

        const mID = urlParams.get('mid');
        const mName = urlParams.get('mname');
        const mAmount = urlParams.get('mamount');
        const mNum = urlParams.get('mnum'); // 들어온 상품 개수

        //console.log(mID)
        //console.log(mName)
        //console.log(mAmount)

        requestPay(mID, mName, mAmount, mNum);

        function requestPay(id, name, amount, num) {
            IMP.request_pay({
                pg : 'kakaopay.TC0ONETIME',
                pay_method : 'kakaopay',
                //merchant_uid: arguments[0],       
                merchant_uid: "57008833-340128",
                //name : arguments[1] + " 등 " + arguments[3] + "건",
                name : "오이비누",
                //amount : arguments[2],
                amount : 2000, 
                buyer_email : 'Iamport@chai.finance',
                buyer_name : '캡스턴디자인 기술지원팀',
                buyer_tel : '010-1234-5678',
                buyer_addr : '인천광역시 연수구 아카데미로 119',
                buyer_postcode : '123-456'
            }, function (rsp) { // callback
                if (rsp.success) {
                    console.log(rsp);
                    window.close();
                } else {
                    console.log(rsp);
                }
            }); 
        }
    </script>
    <meta charset="UTF-8">
    <title>Sample Payment</title>
</head>
<body>
    <!--<button onclick="requestPay()">결제하기</button>  // 결제하기 버튼 생성 -->
    
</body>
</html>